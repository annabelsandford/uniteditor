/*
⠀⠀⠀⠀⢀⣴⣿⡏⠀⠀⠀⠀⠀⠈⠁⠎⠀⣠⠏⠀⢠⠎⠀⠀⢀⣠⠞⠉⢀⣤⠖⠢⢄⠀⠀⠀⠙⢆⢻⡉⠑⠤⡀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⣰⢿⡟⣼⠀⠀⠀⠀⠀⠀⠀⠂⠀⣰⡏⠀⢀⠏⠀⠀⣠⣿⠃⢀⢴⡏⠀⢀⡔⠋⠀⠀⠀⠀⠘⡷⠉⠀⠀⠈⠲⣄⠀⠀⠀⠀⠀
⠀⠀⢰⠋⣼⢀⡏⠀⠀⠀⢀⠀⠀⠀⡁⢠⠇⢧⣀⣸⠀⠀⢰⠣⡇⢠⠋⣾⠀⢀⠎⠀⠀⣠⣖⡛⣗⢦⠇⠶⠶⠶⣖⠀⠈⠳⡤⠤⠦⢄
⠀⣰⠃⢀⡇⢸⡇⠀⠀⠀⣸⡀⠀⠀⢳⡜⠊⠉⠀⠀⠉⠓⢯⡀⢳⣾⠀⢻⡀⠸⡄⠀⢰⠃⠀⠈⠻⣿⣶⣒⣤⠀⠈⠳⡄⠀⠙⣦⠀⠀
⠀⠇⠀⠀⠃⠘⠃⠀⠀⠀⢿⠳⣄⢠⢏⠔⠙⡆⠀⠀⠀⠀⠀⠙⢦⠉⠁⠀⠙⠦⣇⠀⢸⡀⠀⠀⠀⠈⠉⠙⣿⠀⠀⠀⠀⠀⠀⠘⡆⠀
⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢦⡈⡟⣸⠀⠀⠁⠀⠀⠀⠀⠀⠀⠀⠉⠉⠉⠒⠦⡀⠉⠉⠁⠀⠀⠀⠀⠀⢀⡞⠀⠀⠀⠀⠀⠀⠀⠘⠁
⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣽⡃⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣦⠀⠀⠀⠀⢰⡴⠚⠉⠀⠀⢀⡼⠁⠀⠀⠀⠀⠁
⠁⢠⡴⢚⡛⠺⣟⡖⠒⠚⠋⠁⠘⡇⢣⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⠀⠀⠀⠉⠒⠶⠤⢶⡿⢁⡤⠀⠀⠀⠀⠀
⡾⠉⢚⣉⣉⣦⠘⠀⠀⠀⠀⠀⠀⢷⠘⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⣠⠤⠤⠤⠤⣀⠠⣤⣖⣯⠴⠋⠀⢠⠄⠀⠀⠀
⠀⣰⠋⠀⠀⣿⠀⠀⠀⠀⠀⠀⠐⠘⣇⠈⢡⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⢏⠆⠠⡀⠀⠀⠈⠳⡘⢦⣀⠀⢀⣠⠏⠀⠀⠀⠀
⠀⡇⠀⢀⡶⠋⠀⠀⠀⠀⠀⠔⠄⢷⣸⣧⠈⠒⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⢃⠇⠀⠀⠇⠀⠀⠀⠀⢳⢀⣈⣩⠽⠃⠀⡰⢻⡄⠀
⡀⢧⡀⠀⠁⠀⠀⠀⠀⠀⠀⠀⠀⠈⢿⠹⣷⡄⠀⠀⠀⠀⠀⠀⠀⢀⣠⠖⠋⡏⠸⠀⠀⠀⠀⠀⠀⠀⠀⠘⠚⠻⢤⡤⠴⢚⣥⠟⠀⠀
⣧⠀⢉⣳⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⢦⣤⣤⣤⠤⠖⠚⠉⠀⠀⢸⡇⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⣺⠋⠀⢀⠀⠀
⠘⠷⣼⣚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣷⣦⣄⠀⠀⠀⠸⡇⠰⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⣠⠎⠀⢠
⠀⠀⠸⣯⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⣿⣷⣄⠀⠀⣧⠀⢩⠂⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠛⠛⠁⠀⢀⡏
⠀⠀⠀⠹⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠏⠉⠛⠻⣿⣿⣿⣿⣿⣿⣿⣷⣄⠸⡄⠱⠴⠀⠀⠀⠀⠀⠀⠀⠀⢀⡴⠃⠀⢠⡆⣠⠟⣀
⠀⠀⠀⢸⣟⣀⡀⠀⠀⠀⠀⠀⠀⠀⢠⡏⠀⠠⠀⠀⠈⠻⣿⣿⣿⣿⣿⣿⣿⣷⣷⣀⠀⠀⠀⠀⠀⠀⠀⣀⣴⣿⠇⢀⣤⣿⡾⠛⠛⠉
⠀⠀⢀⣾⣋⣀⠙⢦⠀⠀⠀⠀⠀⠀⣾⠀⠀⠀⠀⠀⠀⠀⠹⣿⣿⣿⣿⣿⣿⣿⡟⠈⠹⡗⣖⠒⢚⣿⠛⠛⠛⠓⠛⠉⠀⢸⡇⠀⠀⠀
⠀⣴⠏⠁⠀⠀⠉⣻⣄⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⡿⠋⠀⠀⠣⠌⠘⡇⣾⣿⠀⠀⠀⠀⠀⠀⠀⢸⡇⠀⠀⠀
⣴⠋⠀⠀⠀⣠⠞⠁⠀⠙⣄⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⡿⠋⠀⠀⠀⠀⠈⠀⠰⢡⡏⣿⠀⠀⠀⠀⠀⠀⡼⢸⡃⠀⠀⠀
⡏⠀⠀⢀⠔⠁⠀⠀⠀⣠⠼⠦⡀⠀⢿⠀⠀⠀⠀⠀⠀⠀⢠⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⢁⣾⡁⢸⠀⠀⠀⠀⠀⡼⠁⢸⣷⠀⠀⠀
⠀⠀⠀⠋⠀⠀⣀⡴⠋⢁⠤⠖⠛⠒⢾⡄⠀⠀⠀⠀⣀⡴⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣿⣿⡇⢸⡆⠀⠀⠀⡼⠁⠀⣼⠟⠁⠀⠀
⡄⠀⠀⠀⠀⠚⠁⠀⠀⡏⠀⠀⠀⣰⢸⠻⣤⣤⠶⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣴⣾⣿⣿⣿⣇⢸⡇⠀⠀⡼⠁⠀⠀⣿⠀⠀⠀⠀
⠻⣄⠀⠀⠀⠀⠀⠀⠀⠧⠀⠀⠀⠻⣏⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⡴⠒⠚⣿⡻⣿⡛⠛⣿⠿⣛⢾⡇⠀⠜⠀⠀⠀⠀⡏
Sabrina Annabel Sandford (@annabellica) 2023
*/
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Xml;

namespace UnitEditor
{
    public partial class Form2 : Form
    {
        // AI fill data for personnel and equipment
        private string ai_fill_personnel_police = "<unit id=\"POLICEMAN\"><defaultcount value=\"1\" /></unit><unit id=\"PROFILER\" /><unit id=\"SHOOTER\" /><unit id=\"SCOUT\" />";
        private string ai_fill_personnel_ems = "<unit id=\"DOCTOR\"><defaultcount value=\"0\" /></unit><unit id=\"PARAMEDICS\"><defaultcount value=\"1\" /></unit>";
        private string ai_fill_personnel_fire = "<unit id=\"FIREFIGHTER\"><defaultcount value=\"2\" /></unit><unit id=\"FIREFIGHTERMASK\" /><unit id=\"FIREFIGHTERABC\" /><unit id=\"DIVER\" /><unit id=\"ZF\" />";
        private string ai_fill_personnel_tech = "<unit id=\"ENGINEER\"><defaultcount value=\"1\" /></unit>";

        private string ai_fill_equipment_police = "<unit id=\"FIRE EXTINGUISHER\" /><unit id=\"AXE\" />";
        private string ai_fill_equipment_ems = "<unit id=\"FIRE EXTINGUISHER\" /><unit id=\"AXE\" />";
        private string ai_fill_equipment_fire = "<unit id=\"FIRE EXTINGUISHER\" /><unit id=\"FIRE HOSE\" /><unit id=\"JAWS OF LIFE\" /><unit id=\"CHAIN SAW\" /><unit id=\"AXE\" /><unit id=\"JUMP PAD\" />";
        private string ai_fill_equipment_tech = "<unit id=\"FIRE EXTINGUISHER\" /><unit id=\"AXE\" />";

        private string f2_mod_path;
        private string f2_object_group;
        private string f2_object_type;

        public Form2(string mod_path, string object_group, string object_type)
        {
            f2_mod_path = mod_path;
            f2_object_group = object_group;
            f2_object_type = object_type;

            InitializeComponent();

            // Set initial state based on object group and type
            SetInitialState();

            // Display the mod path, object group, and object type in the console
            Console.WriteLine("Form2: mod_path = " + f2_mod_path);
            Console.WriteLine("Form2: object_group = " + f2_object_group);
            Console.WriteLine("Form2: object_type = " + f2_object_type);
        }

        private void SetInitialState()
        {
            // Set object group selection
            list_group.SelectedItem = f2_object_group;

            // Set object type selection
            list_type.SelectedItem = f2_object_type;

            // Enable/disable controls based on object type
            bool isPersonnel = (f2_object_type == "Person");
            textBox5.Enabled = !isPersonnel;
            textBox6.Enabled = !isPersonnel;
            textBox7.Enabled = !isPersonnel;
            textBox8.Enabled = !isPersonnel;
            button_personnel_fill.Enabled = !isPersonnel;
            button_equipment_fill.Enabled = !isPersonnel;
        }

        private void find_prototype_button_Click(object sender, EventArgs e)
        {
            // Open a file dialog to find the prototype file, starting at the mod path
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.InitialDirectory = Path.Combine(f2_mod_path, "Prototypes");
            openFileDialog1.Filter = "Emergency Prototype (*.e4p)|*.e4p";
            openFileDialog1.FilterIndex = 2;
            openFileDialog1.RestoreDirectory = false;
            openFileDialog1.Title = "UE - Select Prototype File";

            // If the user selects a file, set the text box to the file path
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                string prototype_path = openFileDialog1.FileName;
                prototype_path = prototype_path.Replace(f2_mod_path + "\\", "").Replace("\\", "/");
                prototype_path = "mod:" + prototype_path;
                textBox2.Text = prototype_path;
            }
        }

        private void list_type_SelectedIndexChanged(object sender, EventArgs e)
        {
            // Enable/disable controls based on object type
            bool isPersonnel = (list_type.SelectedItem.ToString() == "Personnel");
            textBox5.Enabled = !isPersonnel;
            textBox6.Enabled = !isPersonnel;
            textBox7.Enabled = !isPersonnel;
            textBox8.Enabled = !isPersonnel;
            button_personnel_fill.Enabled = !isPersonnel;
            button_equipment_fill.Enabled = !isPersonnel;
        }

        private void list_group_SelectedIndexChanged(object sender, EventArgs e)
        {
            // Update object group based on the selection
            f2_object_group = list_group.SelectedItem.ToString();
        }

        private void button_personnel_fill_Click(object sender, EventArgs e)
        {
            // Fill the personnel text box based on the selected object group
            switch (f2_object_group)
            {
                case "Police":
                    textBox7.Text = ai_fill_personnel_police;
                    break;
                case "Ambulance":
                    textBox7.Text = ai_fill_personnel_ems;
                    break;
                case "Fire Department":
                    textBox7.Text = ai_fill_personnel_fire;
                    break;
                case "TEC":
                    textBox7.Text = ai_fill_personnel_tech;
                    break;
                default:
                    MessageBox.Show("Error: Invalid group");
                    break;
            }
        }

        private void button_equipment_fill_Click(object sender, EventArgs e)
        {
            // Fill the equipment text box based on the selected object group
            switch (f2_object_group)
            {
                case "Police":
                    textBox8.Text = ai_fill_equipment_police;
                    break;
                case "Ambulance":
                    textBox8.Text = ai_fill_equipment_ems;
                    break;
                case "Fire Department":
                    textBox8.Text = ai_fill_equipment_fire;
                    break;
                case "TEC":
                    textBox8.Text = ai_fill_equipment_tech;
                    break;
                default:
                    MessageBox.Show("Error: Invalid group");
                    break;
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Get input values
            string selected_type = list_type.SelectedItem.ToString();
            string selected_group = list_group.SelectedItem.ToString();
            string unit_id = textBox1.Text;
            string prototype = textBox2.Text;
            string price = textBox3.Text;
            string space = textBox4.Text;
            string loadspace = textBox5.Text;
            string speed = textBox6.Text;
            string personnel = textBox7.Text;
            string equipment = textBox8.Text;

            // Necessary Checks ==================================================

            // Check if the portraits.xml file exists
            string portrait_path = Path.Combine(f2_mod_path, "Specs", "portraits.xml");
            if (!File.Exists(portrait_path))
            {
                MessageBox.Show("Error: portraits.xml does not exist. Path: " + portrait_path);
                return;
            }

            // Check for merge conflicts with existing data
            bool mergeConflict = CheckMergeConflicts(portrait_path, unit_id);
            if (mergeConflict)
            {
                MessageBox.Show("Merge Conflict: A conflict occurred with the existing data.");
                return;
            }

            // Check if the unit directory exists
            string unit_directory_path = Path.Combine(f2_mod_path, "Units", (selected_type == "Vehicle" ? "Vehicles" : "Personnel"), selected_group, unit_id);
            bool unitDirectoryExists = Directory.Exists(unit_directory_path);

            // ================================================== Necessary Checks

            if (selected_type == "Vehicle")
            {
                // VEHICLE SAVE CODE

                // Perform additional checks for vehicle-specific fields
                if (!ValidateVehicleFields(unit_id, prototype, price, space, loadspace, speed))
                    return;

                // Add the portrait to portraits.xml
                AddPortraitToXml(portrait_path, prototype, unit_id);

                // Check if the prototype exists in freeplaybase.xml
                string freeplaybase_path = Path.Combine(f2_mod_path, "Specs", "freeplaybase.xml");
                if (!File.Exists(freeplaybase_path))
                {
                    MessageBox.Show("Error: freeplaybase.xml does not exist. Path: " + freeplaybase_path);
                    return;
                }
                CheckAndAddPrototypeToFreeplayXml(freeplaybase_path, prototype);

                // Check if the prototype exists in freeplaybase_d.xml
                string freeplaybase_d_path = Path.Combine(f2_mod_path, "Specs", "freeplaybase_d.xml");
                if (!File.Exists(freeplaybase_d_path))
                {
                    MessageBox.Show("Error: freeplaybase_d.xml does not exist. Path: " + freeplaybase_d_path);
                    return;
                }
                CheckAndAddPrototypeToFreeplayXml(freeplaybase_d_path, prototype);

                // Create the unit directory if it doesn't exist
                if (!unitDirectoryExists)
                    Directory.CreateDirectory(unit_directory_path);

                // Create unit.xml in the unit directory
                string unit_xml_path = Path.Combine(unit_directory_path, "unit.xml");
                CreateUnitXmlForVehicle(unit_xml_path, unit_id, prototype, price, speed, space, loadspace, personnel, equipment);
            }
            else
            {
                // PERSONNEL SAVE CODE

                // Perform additional checks for personnel-specific fields
                if (!ValidatePersonnelFields(unit_id, prototype, price, space))
                    return;
            }

            // Message box for successful unit creation
            MessageBox.Show("Unit successfully created");

            // Close the form
            this.Close();
        }

        private bool CheckMergeConflicts(string portraitPath, string unitId)
        {
            bool mergeConflict = false;
            string mergeConflictMessage = "Merge Conflict:\n";

            // Load the portraits.xml file
            XmlDocument portraitXml = new XmlDocument();
            portraitXml.Load(portraitPath);
            XmlNodeList portraitList = portraitXml.SelectNodes("/portraits/portrait");

            foreach (XmlNode portrait in portraitList)
            {
                string portraitPrototype = portrait.Attributes["prototype"].Value;
                string portraitUnitId = portrait.Attributes["unit"].Value;

                if (portraitPrototype == textBox2.Text)
                {
                    mergeConflict = true;
                    mergeConflictMessage += "Portrait already exists with prototype: " + prototype + "\n";
                }
                if (portraitUnitId == unitId)
                {
                    mergeConflict = true;
                    mergeConflictMessage += "Portrait already exists with unit id: " + unitId + "\n";
                }
            }

            // Check if the unit directory exists
            string unitDirectoryPath = Path.Combine(f2_mod_path, "Units", (list_type.SelectedItem.ToString() == "Vehicle" ? "Vehicles" : "Personnel"), list_group.SelectedItem.ToString(), unitId);
            if (Directory.Exists(unitDirectoryPath))
            {
                mergeConflict = true;
                mergeConflictMessage += "Unit directory already exists: " + unitDirectoryPath + "\n";
            }

            if (mergeConflict)
            {
                MessageBox.Show(mergeConflictMessage, "UE - Merge Conflict", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return true;
            }

            return false;
        }

        private void AddPortraitToXml(string portraitPath, string prototype, string unitId)
        {
            XmlDocument portraitXml = new XmlDocument();
            portraitXml.Load(portraitPath);

            XmlElement newPortrait = portraitXml.CreateElement("portrait");
            newPortrait.SetAttribute("prototype", prototype);
            newPortrait.SetAttribute("text", unitId);
            newPortrait.SetAttribute("unit", unitId);

            portraitXml.DocumentElement.AppendChild(newPortrait);
            portraitXml.Save(portraitPath);
        }

        private void CheckAndAddPrototypeToFreeplayXml(string freeplayXmlPath, string prototype)
        {
            XmlDocument freeplayXml = new XmlDocument();
            freeplayXml.Load(freeplayXmlPath);

            XmlNodeList vehicleList = freeplayXml.SelectNodes("/freeplaybase/vehicle");

            bool prototypeExists = false;
            foreach (XmlNode vehicle in vehicleList)
            {
                string vehiclePrototype = vehicle.Attributes["prototype"].Value;
                if (vehiclePrototype == prototype)
                {
                    prototypeExists = true;
                    break;
                }
            }

            if (!prototypeExists)
            {
                XmlElement newVehicle = freeplayXml.CreateElement("vehicle");
                newVehicle.SetAttribute("prototype", prototype);
                newVehicle.SetAttribute("count", "2");

                freeplayXml.DocumentElement.AppendChild(newVehicle);
                freeplayXml.Save(freeplayXmlPath);
            }
        }

        private void CreateUnitXmlForVehicle(string unitXmlPath, string unitId, string prototype, string price, string speed, string space, string loadspace, string personnel, string equipment)
        {
            XmlDocument unitXml = new XmlDocument();

            XmlElement unitElement = unitXml.CreateElement("unit");
            unitElement.SetAttribute("id", unitId);

            XmlElement campaignElement = unitXml.CreateElement("campaign");
            XmlElement missionsElement = unitXml.CreateElement("missions");
            missionsElement.SetAttribute("value", "20");

            XmlElement prototypeElement = unitXml.CreateElement("prototype");
            prototypeElement.SetAttribute("name", prototype);

            XmlElement priceElement = unitXml.CreateElement("price");
            priceElement.SetAttribute("value", price);

            XmlElement speedElement = unitXml.CreateElement("speed");
            speedElement.SetAttribute("value", speed);

            XmlElement spaceElement = unitXml.CreateElement("space");
            spaceElement.SetAttribute("value", space);

            XmlElement loadspaceElement = unitXml.CreateElement("loadspace");
            loadspaceElement.SetAttribute("value", loadspace);

            XmlElement personnelElement = unitXml.CreateElement("personnel");
            personnelElement.InnerXml = personnel;

            XmlElement equipmentElement = unitXml.CreateElement("equipment");
            equipmentElement.InnerXml = equipment;

            missionsElement.AppendChild(prototypeElement);
            missionsElement.AppendChild(priceElement);
            missionsElement.AppendChild(speedElement);
            missionsElement.AppendChild(spaceElement);
            missionsElement.AppendChild(loadspaceElement);
            missionsElement.AppendChild(personnelElement);
            missionsElement.AppendChild(equipmentElement);

            campaignElement.AppendChild(missionsElement);
            unitElement.AppendChild(campaignElement);

            unitXml.AppendChild(unitElement);
            unitXml.Save(unitXmlPath);
        }

        private bool ValidateVehicleFields(string unitId, string prototype, string price, string space, string loadspace, string speed)
        {
            if (string.IsNullOrWhiteSpace(unitId) || unitId.Contains(" "))
            {
                MessageBox.Show("Error: Unit ID is empty or contains spaces");
                return false;
            }

            if (string.IsNullOrWhiteSpace(prototype))
            {
                MessageBox.Show("Error: Prototype is empty or contains spaces");
                return false;
            }

            if (string.IsNullOrWhiteSpace(price) || price.Contains(" ") || price.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Price is empty, contains spaces, or letters");
                return false;
            }

            if (string.IsNullOrWhiteSpace(space) || space.Contains(" ") || space.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Space is empty, contains spaces, or letters");
                return false;
            }

            if (string.IsNullOrWhiteSpace(loadspace) || loadspace.Contains(" ") || loadspace.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Loadspace is empty, contains spaces, or letters");
                return false;
            }

            if (string.IsNullOrWhiteSpace(speed) || speed.Contains(" ") || speed.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Speed is empty, contains spaces, or letters");
                return false;
            }

            return true;
        }

        private bool ValidatePersonnelFields(string unitId, string prototype, string price, string space)
        {
            if (string.IsNullOrWhiteSpace(unitId) || unitId.Contains(" "))
            {
                MessageBox.Show("Error: Unit ID is empty or contains spaces");
                return false;
            }

            if (string.IsNullOrWhiteSpace(prototype))
            {
                MessageBox.Show("Error: Prototype is empty or contains spaces");
                return false;
            }

            if (string.IsNullOrWhiteSpace(price) || price.Contains(" ") || price.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Price is empty, contains spaces, or letters");
                return false;
            }

            if (string.IsNullOrWhiteSpace(space) || space.Contains(" ") || space.Any(char.IsLetter))
            {
                MessageBox.Show("Error: Space is empty, contains spaces, or letters");
                return false;
            }

            return true;
        }
    }
}
